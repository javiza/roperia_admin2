<div class="contenedor">
  <div class="contenido">
    <!-- Formulario -->
    <div class="formulario">
      <h1>{{ isEditing ? 'Editar' : 'Ingresa' }} Prenda de Ropa:</h1>
      <form (ngSubmit)="agregarProducto()">
        <ion-list>
          <ion-item>
            <ion-input [(ngModel)]="nombre" name="nombre" label="Nombre"></ion-input>
          </ion-item>
          <ion-item>
            <ion-input [(ngModel)]="descripcion" name="descripcion" label="Descripción"></ion-input>
          </ion-item>
          <ion-item>
            <ion-input [(ngModel)]="cantidad" name="cantidad" label="Cantidad"></ion-input>
          </ion-item>
        </ion-list>
        <ion-button expand="block" type="submit" class="ion-margin-top">
          {{ isEditing ? 'Actualizar' : 'Enviar' }}
        </ion-button>
      </form>
    </div>

    <!-- Lista de ropa ingresada -->
    <div class="lista">
      <h3>Ropa ingresada recientemente</h3>
      <ion-list>
        <ion-item *ngFor="let productos of productos | slice:-10" class="producto-item">
          <div class="producto-grid">
            <span class="producto-nombre">{{ productos.nombre }}</span>
            <span class="producto-descripcion">{{ productos.descripcion }}</span>
            <span class="producto-cantidad">{{ productos.cantidad }}</span>
            <div class="botones">
              <ion-button (click)="onProductoChange(productos)">Editar</ion-button>
              <ion-button color="danger" (click)="eliminarProducto(productos.id!)">Eliminar</ion-button>
            </div>
          </div>
        </ion-item>
      </ion-list>
    </div>

   <!-- Sección de Totales -->
<div class="totales">
  <h3>Totales de ropa</h3>
  <ion-list>
    <ion-item *ngFor="let total of (totalPorPrenda | keyvalue) | slice:0:5">
      <div class="fila-total">
        <span class="nombre-prenda">{{ total.value.nombre }}</span> <!-- Accede a 'nombre' -->
        <span class="descripcion-prenda">{{ total.value.descripcion }}</span> <!-- Accede a 'descripcion' -->
        <span class="cantidad-total">Total: {{ total.value.cantidad }}</span> <!-- Accede a 'cantidad' -->
      </div>
    </ion-item>
  </ion-list>
  <a href="#" (click)="abrirModal()">Ver todo</a>
</div>


    <!-- Modal -->
    <ion-modal [isOpen]="modalOpen" (didDismiss)="cerrarModal()" backdropDismiss="false">
      <ng-template>
        <ion-header>
          <ion-toolbar>
            <ion-title>Detalles de los Productos</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="cerrarModal()">Cerrar</ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        <ion-content>
          <ion-list>
            <ion-item *ngFor="let producto of productos">
              <h2>{{ producto.nombre }}</h2>
              <p>{{ producto.descripcion }}</p>
              <p>Cantidad: {{ producto.cantidad }}</p>
            </ion-item>
          </ion-list>
          <ion-button expand="full" color="primary" (click)="imprimir()">Imprimir</ion-button>
        </ion-content>
      </ng-template>
    </ion-modal>
  </div>
  
</div>
